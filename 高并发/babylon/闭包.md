---
title: graphbuilder
toc: true
date: 2024-11-08 21:42:59
tags:
- 
categories:
- 
typora-root-url: ..\img
---

闭包整体的类结构

![grc-closure](https://raw.githubusercontent.com/yefengdanqing/picture_bed/master/grc-closure.jpg)

# 

图执行器，采用相应调度机制来执行一个图节点（什么调度机制）

分为内置的图执行器和线程池的图执行器

## GraphVertexClosure

closure.done(process());闭包的方式来运行



## 线程池的图执行器

# SchedInterface

主要是定义一套统一的调度接口，主要便于统一支持内核态和用户态调度切换机制

# 其他知识

```c++
Closure::Callback* ClosureContext::SEALED_CALLBACK = reinterpret_cast<Closure::Callback*>(0xFFFFFFFFFFFFFFFFL);
::std::atomic<Closure::Callback*> _callback {nullptr};
_callback.load(::std::memory_order_relaxed) == SEALED_CALLBACK;
```

这行代码将 `SEALED_CALLBACK` 初始化为 `0xFFFFFFFFFFFFFFFFL`，表示一个特殊的无效回调指针，通常用于标记已封闭或不再有效的回调。此时，`reinterpret_cast` 用于将 `0xFFFFFFFFFFFFFFFFL` 强制转换为 `Closure::Callback*` 类型的指针，但需要小心使用，因为该指针并不是指向有效内存的正常指针。

<!-- more -->
